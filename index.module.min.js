const isReactNative="undefined"!=typeof navigator&&"ReactNative"===navigator.product,isReactNativeDev=isReactNative&&__DEV__,isWeb="undefined"==typeof require||isReactNative,req=t=>isWeb?null:(global.require||require)(t),knownColors={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},ansiStyles={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]},conv={hex:t=>{return 6!==(t=3===(t=t.startsWith("#")?t.substring(1):t).length?t.split("").map(t=>t+t).join(""):t).length?Color.rgb(0,0,0):[(t=Number.parseInt(t,16))>>16&255,t>>8&255,255&t]},hsl:(t,e,r)=>{var i=t/360,t=e/100,e=r/100;let o,n,a;if(0==t)return[a=255*e,a,a];var s=2*e-(o=e<.5?e*(1+t):e+t-e*t),l=[0,0,0];for(let t=0;t<3;t++)(n=i+1/3*-(t-1))<0&&n++,1<n&&n--,a=6*n<1?s+6*(o-s)*n:2*n<1?o:3*n<2?s+(o-s)*(2/3-n)*6:s,l[t]=255*a;return l},hsv:(t,e,r)=>{var t=t/60,e=e/100,r=r/100,i=Math.floor(t)%6,t=t-Math.floor(t),o=255*r*(1-e),n=255*r*(1-e*t),e=255*r*(1-e*(1-t));return[[r*=255,e,o],[n,r,o],[o,r,e],[o,n,r],[e,o,r],[r,o,n]][i]}},Color={supportsColor:{hasBasic:!0,has256:!0,has16m:!0},rgb:(e,r,i)=>t=>`[38;2;${e};${r};${i}m`+t+(isWeb,"[39m"),hex:t=>Color.rgb(...conv.hex(t)),hsl:(t,e,r)=>Color.rgb(...conv.hsl(t,e,r)),hsv:(t,e,r)=>Color.rgb(...conv.hsv(t,e,r)),bgRgb:(e,r,i)=>t=>`[48;2;${e};${r};${i}m`+t+(isWeb?"[39m":"[49m"),bgHex:t=>Color.bgRgb(...conv.hex(t)),bgHsl:(t,e,r)=>Color.bgRgb(...conv.hsl(t,e,r)),bgHsv:(t,e,r)=>Color.bgRgb(...conv.hsv(t,e,r))};if(isWeb){const X=Number.parseInt((/(Chrome|Chromium)\/(?<chromeVersion>\d+)\./.exec(navigator.userAgent)||{groups:{chromeVersion:-1}}).groups.chromeVersion,10);X<69&&(Color.supportsColor={hasBasic:!1,has256:!1,has16m:!1})}else Color.supportsColor=req("./vendor/supports-color/index.js").stdout;Object.keys(knownColors).forEach(t=>{Color[t]=Color.rgb(...knownColors[t]),Color["bg"+t[0].toUpperCase()+t.substring(1)]=Color.bgRgb(...knownColors[t])});const ansiKeys=Object.keys(ansiStyles),fs=(ansiKeys.forEach((t,e)=>{const r=ansiStyles[t];Color[t]=t=>t?isWeb?`[99;${e}m${t}[39m`:`[${r[0]}m${t}[${r[1]}m`:""}),req("fs")),path=req("path"),_util={inspect:(...t)=>isWeb?JSON.stringify(t[0]):req("util").inspect(...t)},fnCheck=(t,...e)=>"function"==typeof t?t(...e):t,ClearAll=isWeb?Color.reset("$").replace("$",""):"[39m[49m[22m[23m[24m[29m",cH=(t,e,r)=>fnCheck(t[e?e+r:r.toLowerCase()],t),componentHelper=(t,e)=>({color:cH(e,t,"Color"),backgroundColor:cH(e,t,"BackgroundColor"),padding:cH(e,t,"Padding"),bold:cH(e,t,"Bold"),italic:cH(e,t,"Italic"),underline:cH(e,t,"Underline"),strikethrough:cH(e,t,"Strikethrough"),alwaysRGB:e.alwaysRGB,paletteName:e.paletteName});function __stack(){var t=Error.stackTraceLimit,e=(Error.stackTraceLimit=1/0,Error.prepareStackTrace),r=(Error.prepareStackTrace=function(t,e){return e},new Error),r=(Error.captureStackTrace(r,arguments.callee),[...r.stack]);return Error.prepareStackTrace=e,Error.stackTraceLimit=t,r.map(t=>({this:t.getThis(),typeName:t.getTypeName(),function:t.getFunction(),functionName:t.getFunctionName(),methodName:t.getMethodName(),fileName:t.getFileName(),lineNumber:t.getLineNumber(),columnNumber:t.getColumnNumber(),evalOrigin:t.getEvalOrigin(),topLevel:t.isToplevel(),eval:t.isEval(),native:t.isNative(),constructor:t.isConstructor()}))}const COLOR_PALETTES={JetBrains:{black:[0,0,0],red:[119,46,44],green:[57,81,31],yellow:[92,79,23],blue:[36,89,128],magenta:[92,64,105],cyan:[21,79,79],white:[97,97,97],blackBright:[66,66,66],redBright:[184,36,33],greenBright:[69,133,0],yellowBright:[168,123,0],blueBright:[23,120,189],magentaBright:[178,71,178],cyanBright:[0,110,110],whiteBright:[255,255,255]}},makeWebPalette=(COLOR_PALETTES.default=COLOR_PALETTES.JetBrains,r=>{const i={};return Object.keys(r).forEach(t=>{var e="rgb("+r[t].join(",")+")";i[t]=["color: "+e,e],i["bg"+t[0].toUpperCase()+t.substring(1)]=["background-color: "+e,null,e]}),i}),WEB_PALETTES={},DEFAULT_OPTIONS=(Object.keys(COLOR_PALETTES).forEach(t=>WEB_PALETTES[t]=makeWebPalette(COLOR_PALETTES[t])),{format:"%namespace%date %time %tag %text",substitutionsEnabled:!0,styleSubstitutionsEnabled:!1,componentsEnabled:!0,newLine:!0,namespace:"",stylingEnabled:!0,stdout:null,stdin:null,htmlOut:null,alwaysRGB:!1,paletteName:"default",disabledTags:[],defaultColor:"",defaultBackgroundColor:"",tagColor:"",tagBold:!0,tagItalic:!1,tagUnderline:!1,tagStrikethrough:!1,tagPadding:2,dateColor:"",dateBackgroundColor:"blueBright",dateBold:!0,dateItalic:!1,dateUnderline:!1,dateStrikethrough:!1,datePadding:1,dateOptions:{month:"short",day:"numeric"},timeColor:"",timeBackgroundColor:"blue",timeBold:!0,timeItalic:!1,timeUnderline:!1,timeStrikethrough:!1,timePadding:1,timeDate:!1,timeHour:!0,timeMinute:!0,timeSecond:!0,timeMillisecond:!1,timeMillisecondLength:3,timeHour12:!1,uptimeColor:"",uptimeBackgroundColor:"cyan",uptimeBold:!0,uptimeItalic:!1,uptimeUnderline:!1,uptimeStrikethrough:!1,uptimePadding:1,uptimeDate:!1,uptimeHour:!0,uptimeMinute:!0,uptimeSecond:!0,uptimeMillisecond:!0,uptimeMillisecondLength:2,groupColor:"",groupBackgroundColor:"",namespaceColor:"",namespaceBackgroundColor:"magenta",namespaceBold:!0,namespaceItalic:!1,namespaceUnderline:!1,namespaceStrikethrough:!1,namespacePadding:1,filenameColor:"red",filenameBackgroundColor:"",filenameBold:!0,filenameItalic:!1,filenameUnderline:!1,filenameStrikethrough:!1,filenamePadding:0,filenameBase:!0,lineColor:"red",lineBackgroundColor:"",lineBold:!0,lineItalic:!1,lineUnderline:!1,lineStrikethrough:!1,linePadding:0,columnColor:"red",columnBackgroundColor:"",columnBold:!0,columnItalic:!1,columnUnderline:!1,columnStrikethrough:!1,columnPadding:0,stackColor:"red",stackBackgroundColor:"",stackBold:!0,stackItalic:!1,stackUnderline:!1,stackStrikethrough:!1,stackPadding:0,stackBase:!0}),webParser=(t,r,i,o)=>t.replaceAll(/(\x1B\[38;2;\d{1,3};\d{1,3};\d{1,3}m)|(\x1B\[48;2;\d{1,3};\d{1,3};\d{1,3}m)|(\x1B\[99;\d+m)|(\x1B\[39m)/g,t=>{var e=t.split(";")[0];return"[38"===e?(t=t.substring(7).split("m")[0].split(";"),i[0]=`rgb(${t.join(",")})`,r.push([`color: rgb(${t.join(",")})`]),"%c"):"[39m"===e?(r.push([""]),"%c"):"[48"===e?(t=t.substring(7).split("m")[0].split(";"),i[1]=`rgb(${t.join(",")})`,r.push([`background-color: rgb(${t.join(",")})`]),"%c"):"[99"===e?(t=ansiKeys[t.substring(5).split("m")[0]],e={reset:[""],bold:["font-weight: bold"],dim:["color: rgba(0, 0, 0, 0.5)","rgba(0, 0, 0, 0.5)"],italic:["font-style: italic"],underline:["text-decoration: underline"],inverse:["color: "+(i[1]||"auto")+"; background-color: "+(i[0]||"auto"),i[0],i[1]],hidden:["opacity: 0"],strikethrough:["text-decoration: line-through"],...WEB_PALETTES[o]}[t],i[0]=e[1]||i[0],i[1]=e[2]||i[1],r.push(e),"%c"):void 0});function CustomError(t){t=new Error(t);Error.captureStackTrace?Error.captureStackTrace(this,CustomError):this.stack=t.stack}CustomError.prototype=Object.create(Error.prototype),CustomError.prototype.constructor=CustomError;class Printer{streams=new Map;chr="%";styleChr="&";styles={};components={};substitutions={};_times={};_counts={};_group=0;constructor(t={}){t=Printer.setDefault(t,Printer.DEFAULT_OPTIONS),this.options=t,this.Printer=Printer,this._periodicOptions=null,this.stdin=t.stdin||(isWeb?null:process.stdin||process.openStdin()),this.stdout=t.stdout||(isWeb?Printer.DEFAULT_OUTPUTS.web(this):Printer.DEFAULT_OUTPUTS.terminal(this)),this.tags={pass:{text:"PASS",backgroundColor:"greenBright",textColor:"green"},fail:{text:"FAIL",backgroundColor:"redBright",textColor:"redBright"},error:{text:"ERR!",backgroundColor:"red",textColor:"red"},warn:{text:"WARN",backgroundColor:"yellow",textColor:"yellow"},info:{text:"INFO",backgroundColor:"blueBright",textColor:"blue"},debug:{text:"DEBUG",backgroundColor:"gray",textColor:"gray"},notice:{text:"NOTICE",backgroundColor:"cyanBright",textColor:"cyan"},log:{text:"LOG",backgroundColor:"gray",textColor:"white"},assert:{text:"ASSERT",backgroundColor:"white",color:"black",textColor:"gray"},ready:{text:"READY",backgroundColor:"magenta",textColor:"magenta"}},this._namespace=t.namespace||"",this.addComponent("date",t=>{var e=(new Date).toLocaleString("en",t.dateOptions);return{result:Printer.paint(e,componentHelper("date",t)),plain:e}}),this.addComponent("tag",t=>{var e=this.tags[t.tag||""]||this.tags[(t.tag||"").toLowerCase()]||this.tags.log,r=(t.defaultColor=e.textColor,"function"==typeof e.text?e.text():e.text),t=componentHelper("tag",t);return{result:Printer.paint(r,{...t,color:t.color||fnCheck(e.color),backgroundColor:fnCheck(e.backgroundColor)}),plain:r}}),this.addComponent("time",e=>{var r=new Date,i=[["Date","getDate"],["Hour","getHours"],["Minute","getMinutes"],["Second","getSeconds"],["Millisecond","getMilliseconds",e.timeMillisecondLength]];let o="";for(let t=0;t<i.length;t++){var n=i[t];if(e["time"+n[0]]){let t=r[n[1]]();"Hour"===n[0]&&e.timeHour12&&12<t&&(t-=12),o+=t.toString().padStart(n[2]||2,"0").substring(0,n[2]||2)+("Second"===n[0]?".":":")}}return o=o.substring(0,o.length-1),e.timeHour12&&(o+=" "+(12<r.getHours()?"PM":"AM")),{result:Printer.paint(o,componentHelper("time",e)),plain:o}}),this.addComponent("uptime",r=>{let i=[],o=performance.now();var t=t=>{var e=Math.floor(o/t);i.push(e.toString().padStart(1===t?3:2,"0").substring(0,1===t?r.uptimeMillisecondLength:3)),o-=e*t},t=(r.uptimeDate&&t(864e5),r.uptimeHour&&t(36e5),r.uptimeMinute&&t(6e4),r.uptimeSecond&&t(1e3),r.uptimeMillisecond&&t(1),i.join(":"));return{result:Printer.paint(t,componentHelper("uptime",r)),plain:t}}),this.addComponent("namespace",t=>t.namespace?{result:Printer.paint(t.namespace,componentHelper("namespace",t))+" ",plain:t.namespace}:{result:"",plain:""}),this.addComponent("filename",t=>{let e=(__stack().find(t=>t.fileName&&t.fileName!==__filename)||{}).fileName;return t.filenameBase&&(e=path.basename(e||"")),{result:Printer.paint(e,componentHelper("filename",t)),plain:e}}),this.addComponent("line",t=>{var e=(__stack().find(t=>t.fileName&&t.fileName!==__filename)||{}).lineNumber;return{result:Printer.paint(e,componentHelper("line",t)),plain:e}}),this.addComponent("column",t=>{var e=(__stack().find(t=>t.fileName&&t.fileName!==__filename)||{}).columnNumber;return{result:Printer.paint(e,componentHelper("column",t)),plain:e}}),this.addComponent("stack",t=>{var e=__stack().find(t=>t.fileName&&t.fileName!==__filename)||{},e=(t.stackBase?path.basename(e.fileName||""):e.fileName)+":"+e.lineNumber+":"+e.columnNumber;return{result:Printer.paint(e,componentHelper("stack",t)),plain:e}}),this.addSubstitution("v",t=>Printer.stringify(t));t=(t,{Cancel:e})=>{var r=typeof t;return"object"!=r&&"function"!=r?e:Printer.stringify(t)},this.addSubstitution("o",t),this.addSubstitution("O",t),this.addSubstitution("s",(t,{Cancel:e})=>"string"!=typeof t?e:t),this.addSubstitution("j",(t,{Cancel:e})=>{if(null===t||"object"!=typeof t||t.constructor!==Object)return e;try{return JSON.stringify(t)}catch(t){return e}}),t=(t,e)=>"number"!=typeof t?e:(Math.sign(t)*Math.floor(Math.abs(t))).toString();this.addSubstitution("i",t),this.addSubstitution("d",t),this.addSubstitution("f",(t,e)=>"number"!=typeof t?e:t.toString()),this.addSubstitution("c",(t,{Cancel:e,Color:r})=>"string"!=typeof t?e:(r.value=this.css(t),r)),this.addStyle("0","color: #000000"),this.addStyle("1","color: #0000AA"),this.addStyle("2","color: #00AA00"),this.addStyle("3","color: #00AAAA"),this.addStyle("4","color: #AA0000"),this.addStyle("5","color: #AA00AA"),this.addStyle("6","color: #FFAA00"),this.addStyle("7","color: #AAAAAA"),this.addStyle("8","color: #555555"),this.addStyle("9","color: #5555FF"),this.addStyle("a","color: #55FF55"),this.addStyle("b","color: #55FFFF"),this.addStyle("c","color: #FF5555"),this.addStyle("d","color: #FF55FF"),this.addStyle("e","color: #FFFF55"),this.addStyle("f","color: #FFFFFF"),this.addStyle("l","font-weight: bold"),this.addStyle("m","text-decoration: strike-through"),this.addStyle("n","text-decoration: underline"),this.addStyle("o","font-style: italic"),this.addStyle("r",""),this.addStyle("t",()=>"color: "+this.getTag(this.options.tag||"log").textColor)}addFile(t){if(isWeb)throw new Error("addFile() method cannot be used on web.");return this.streams.set(t,fs.createWriteStream(t,{flags:"a"})),this}removeFile(t){return this.streams.delete(t),this}makeLoggerFile(t){if(isWeb)throw new Error("makeLoggerFile() method cannot be used on web.");if(t=Printer.setDefault(t,{folder:"./logs",format:"log-"+this.chr+"DD-"+this.chr+"MM-"+this.chr+"YYYY.log",month:"long",day:"long"}),this._periodicOptions=t,!this.streams.get("!periodic")){let c;return this.streams.set("!periodic",c={write:t=>{var e=this._periodicOptions,r=(fs.existsSync(e.folder)||fs.mkdirSync(e.folder),new Date),i=r.getDate(),o=r.getMonth()+1,n=r.getFullYear(),a=r.getHours(),s=r.getMinutes(),l=r.getSeconds(),r=r.getMilliseconds(),u=new Date,u=[["date",u.toLocaleString("en",{weekday:e.day}),!0],["month",u.toLocaleString("en",{month:e.month}),!0],["D",i],["M",o],["Y",n],["h",a],["m",s],["s",l],["S",r]].reduce((t,r)=>t.replaceAll(new RegExp("\\"+this.chr+r[0]+(r[2]?"":"+"),"g"),t=>{var e;return r[2]?r[1]:(e=t.length-1,(t=r[1].toString().padStart(e,"0")).length>e?t.substring(t.length-e):t)}),fnCheck(e.format,e)),i=path.join(e.folder,u);c._streams.has(i)||(c._lastStream&&c._lastStream.close(),fs.mkdirSync(path.dirname(i),{recursive:!0}),c._streams.set(i,c._lastStream=fs.createWriteStream(i,{flags:"a"}))),c._streams.get(i).write(t)},_lastStream:null,_streams:new Map}),this}}makeHashedLoggerFile(t){if(isWeb)throw new Error("makeHashedLoggerFile() method cannot be used on web.");t=Printer.setDefault(t,{folder:"./logs",radix:16,divide:3,format:"log-"+this.chr+"t.log"}),fs.existsSync(t.folder)||fs.mkdirSync(t.folder);t=path.join(t.folder,fnCheck(t.format,t).replaceAll(this.chr+"t",Math.floor(Date.now()/10**t.divide).toString(t.radix)));return this.addFile(t),this}makeGlobal(t=!1){var e=isWeb?window:global;return t&&(e.console=this),e.Printer=this,e.printer=this}new(t){return new Printer(t)}create(t){return new Printer(t)}namespace(t){return this.create({...this.options,namespace:t})}addComponent(t,e){return this.components[t]=e,this}removeComponent(t){return delete this.components[t],this}getComponents(){return this.components}getComponent(t){return this.components[t]}addSubstitution(t,e){return this.substitutions[t]=e,this}removeSubstitution(t){return delete this.substitutions[t],this}getSubstitution(t){return this.substitutions[t]}getSubstitutions(){return this.substitutions}addStyle(t,e){return this.styles[t]=()=>{var t=fnCheck(e);return this.css(t,""===t.trim())},this}removeStyle(t){return delete this.styles[t],this}getStyle(t){return this.styles[t]}getStyles(){return this.styles}addTag(t,e,r,i,o="",n=""){return this.tags[t]={text:e,color:r,backgroundColor:i,textColor:o,textBackgroundColor:n},this}removeTag(t){return delete this.tags[t],this}getTags(){return this.tags}getTag(t){return this.tags[t]}setFormat(t){return this.options.format=t,this}getFormat(){return this.options.format}setCharacter(t){return this.chr=t,this}getCharacter(){return this.chr}setStyleCharacter(t){return this.styleChr=t,this}getStyleCharacter(){return this.styleChr}println(t){return this.stdout&&this.stdout.write(Printer.stringify(t)+"\n"),this}printLine(t){return this.println(t)}print(t){return this.stdout&&this.stdout.write(Printer.stringify(t)),this}backspace(t=1){return this.stdout&&this.stdout.write("\b \b".repeat(t)),this}substitute(...t){return Printer.substitute(this.substitutions,this.chr,...t)}substituteStyles(t){return Printer.substituteStyles(this.styleChr,this.styles,t)}log(...e){const i=this.options;let r="";if(this.options.substitutionsEnabled)r=this.substitute(...e);else for(let t=0;t<e.length;t++){var o=Printer.stringify(e[t]);r+=o,t!==e.length-1&&(r+=" ")}this.options.styleSubstitutionsEnabled&&(r=this.substituteStyles(r)),r+=ClearAll;var t=Printer.stringify(r).split("\n");let n={},a=l=i.format,s=l;if(i.componentsEnabled&&0<Object.keys(this.components).length){const u=`\\${this.chr}[a-zA-Z]+`;var l=fnCheck(i.format,i).split(new RegExp("("+u+")","g")).filter(t=>t).map(t=>{if(new RegExp("^"+u+"$").test(t.toString())){if(t=t.substring(1),!this.components[t])return this.chr+t;if("string"==typeof(t=n[t]||this.components[t](i))||"number"==typeof t)return t.toString();if("object"!=typeof t)throw new Error("Expected the component to throw string, number or an object, got: "+typeof t)}return t});a=l.map(t=>"string"==typeof t?t:t.result).join(""),s=l.map(t=>"string"==typeof t?t:t.plain).join("")}return t.forEach(t=>{var e=t;t=Printer.color(t,i.defaultColor,i.alwaysRGB,i.paletteName),t=Printer.color(t,i.defaultBackgroundColor,i.alwaysRGB,i.paletteName);const r=" ".repeat(this._group)+s.replaceAll(this.chr+"text",e).replaceAll(/\x1B\[\d+m/g,"")+(i.newLine?"\n":"");i.stylingEnabled?this[i.newLine?"println":"print"](Printer.paint(" ".repeat(this._group),componentHelper("group",i))+a.replaceAll(this.chr+"text",t)):this[i.newLine?"println":"print"](r),this.streams.forEach(t=>t.write(r))}),this}tag(t,...e){var r,i,o;return this.options.disabledTags.includes(t)||(r=this.options["tag"],{defaultColor:i,defaultBackgroundColor:o}=this.options,this.options.tag=t,this.log(...e),this.options.tag=r,this.options.defaultColor=i,this.options.defaultBackgroundColor=o),this}pass(...t){return this.tag("pass",...t)}fail(...t){return this.tag("fail",...t)}error(...t){return this.tag("error",...t)}err(...t){return this.error(...t)}warning(...t){return this.warn(...t)}warn(...t){return this.tag("warn",...t)}inform(...t){return this.tag("info",...t)}info(...t){return this.inform(...t)}debug(...t){return this.tag("debug",...t)}notice(...t){return this.tag("notice",...t)}ready(...t){return this.tag("ready",...t)}clear(){this.stdout&&this.stdout.isTTY&&this.stdout.write("[2J[3J[H")}tableRaw(t,e=null){if("object"!=typeof t)return!1;const o={};let r,n;var i;if(t instanceof Set&&(t=[...t]),n=t instanceof Map?(i=[...t],r=i.map(t=>t[0]),i.map(t=>t[1])):(r=Object.keys(t),Object.values(t)),!(r=t.constructor===Array?r.map(t=>+t):r).length)return["┌┐\n└┘"];let a=!1;const s=e||n.map(t=>"object"==typeof t?Object.keys(t):[]).flat(),l=(n.some(t=>"object"!=typeof t)&&(a=!0,s.push("Value")),[[["","",""],...s.map(t=>[t,t,t])]]),u=(t,e=!0)=>_util.inspect(t,!1,null,e),c=(r.forEach((t,e)=>{const r=n[e],i="object"==typeof r?Object.keys(r):[];l.push([t,...s.map((t,e)=>e===s.length-1&&a&&"object"!=typeof r?r:i.includes(t)?r[t]:o)].map(t=>[t,u(t),u(t,!1)]))}),new Array(l[0].length).fill(0).map((t,r)=>l.reduce((t,e)=>Math.max(t,e[r][2].length),0)));var d=c.map(t=>"─".repeat(t+2)),h=["┌"+d.join("┬")+"┐"];for(let i=0;i<l.length;i++){i&&h.push("├"+d.join("┼")+"┤");var g=l[i];h.push("│"+g.map((t,e)=>{var r=t[0]===o?"":i?t[1]:t[0],e=c[e]-(t[0]===o?0:t[2].length)+2,t=Math.round(e/2);return" ".repeat(t)+r+" ".repeat(e-t)}).join("│")+"│")}return h.push("└"+d.join("┴")+"┘"),h}table(t,e=null,r="log"){return isWeb?console.table(t,e):((e=this.tableRaw(t,e))?e.forEach(t=>r?this.tag(r,t):this.println(t)):r?this.tag(r,t):this.println(t),this)}time(t="default"){return this._times[t]=Date.now(),this}timeGet(t="default"){return Date.now()-(this._times[t]||Date.now())}timeLog(t="default",e=3){return this.log(t+": "+this.timeGet(t).toFixed(e)+"ms"),this}timeEnd(t="default",e=3){return delete this._times[t],this.timeLog(t,e),this}count(t="default"){return this.log(t+": "+(this._counts[t]=(this._counts[t]||0)+1)),this._counts[t]}countGet(t="default"){return this._counts[t]}countReset(t="default"){return this._counts[t]=0,this}group(){return this._group++,this}groupEnd(){return this._group--,this._group<0&&(this._group=0),this}groupGet(){return this._group}assert(t,...e){return t||this.tag("assert",...e),this}updateOptions(t){return t=Printer.setDefault(t,Printer.DEFAULT_OPTIONS),this.options={...this.options,...t},this}async readStdinData(){return new Promise(t=>this.stdin.once("data",t))}cursorUp(t=1){if(0!==t)return t<0?this.cursorDown(-t):this.print("["+t+"A")}cursorDown(t=1){if(0!==t)return t<0?this.cursorUp(-t):this.print("["+t+"B")}cursorRight(t=1){if(0!==t)return t<0?this.cursorLeft(-t):this.print("["+t+"C")}cursorLeft(t=1){if(0!==t)return t<0?this.cursorRight(-t):this.print("["+t+"D")}async readLine(t=!0,e=!0){if(!this.stdin)return"";this.stdin.resume();let r=await this.readStdinData();return t&&(r=r.toString()),e&&(r=r.trim()),this.stdin.pause(),r}async readKey(t=0,e=!1){if(!this.stdin)return"";this.stdin.setRawMode(!0);e=await this.readLine(!1,e);return isWeb&&3===e[0]&&process.exit(),this.stdin.setRawMode(!1),e.toString()}readCustom(r){if(!this.stdin)return{promise:new Promise(t=>t("")),end:()=>!0};const i=t=>{var e=o,t=t.length-o;0<e&&this.cursorLeft(e),this.print(n),0<t&&this.cursorLeft(t)};r=Printer.setDefault(r,{onKey:t=>{var e=n;n=n.substring(0,o+1)+t+n.substring(o+1),o++,i(e)},onShiftBackspace:()=>{},onBackspace:()=>{var t=n;n=n.substring(0,o)+n.substring(o+1),--o<-1?o=-1:i(t)},onArrow:t=>{"right"!==t&&"left"!==t||("right"===t?o!==n.length-1&&(this.cursorRight(),o++):-1<o&&(this.cursorLeft(),o--))},onEnd:()=>this.print("\n"),onTermination:()=>!isWeb&&process.exit(),timeout:-1});let o=-1,n="",a;var t=new Promise(t=>a=t);this.stdin.setRawMode(!0),this.stdin.resume();let s,l=!1;this.stdin.on("data",s=t=>{var e,t=t.toString();if(""===t)return r.onTermination();"\b"===t?r.onBackspace():""===t[0]?(e={A:"up",B:"down",C:"right",D:"left"}[t[2]],r.onArrow(e,t)):"\n"===t||"\r"===t||""===t?(this.stdin.setRawMode(!1),this.stdin.pause(),r.onEnd(),this.stdin.off("data",s),a(n),l=!0):""===t?r.onShiftBackspace():r.onKey(t)});const e={promise:t,end:()=>l||this.stdin.emit("data","\n")};return r.timeout&&0<r.timeout&&setTimeout(()=>e.end(),r.timeout),e}async readPassword(e){e=Printer.setDefault(e,{expectPromise:!0});var t=this.readCustom({onKey:t=>this.stdout.write(e.character||"*"),...e});return e.expectPromise?t.promise:t}async readSelection(r=[],t){if(0===r.length)return"";t=Printer.setDefault(t,{expectPromise:!0});let i=0;this.print(r[i]);const e=this.readCustom({onKey:t=>t,onBackspace:t=>t,onArrow:t=>{var e=i;if("up"===t||"left"===t)--i<0&&(i=r.length-1);else{if("down"!==t&&"right"!==t)return;++i>r.length-1&&(i=0)}this.backspace(r[e].length),this.print(r[i])},...t});return e.rawPromise=e.promise,e.promise=new Promise(async t=>{await e.rawPromise,t(i)}),t.expectPromise?e.promise:e}async readSelectionListed(r=[],i){if(i=Printer.setDefault(i,{selectedColor:"black",selectedBackgroundColor:"white",selectedPadding:0,selectedBold:!0,selectedItalic:!1,selectedUnderline:!1,selectedStrikethrough:!1,normalColor:"",normalBackgroundColor:"",normalPadding:0,normalBold:!1,normalItalic:!1,normalUnderline:!1,normalStrikethrough:!1,expectPromise:!0,betweenText:" "}),0===r.length)return"";let o=0,n="";const e=()=>{this.backspace(n.length);let e=n="";for(let t=0;t<r.length;t++)n+=r[t],o===t?e+=Printer.paint(r[t],componentHelper("selected",i)):e+=Printer.paint(r[t],componentHelper("normal",i)),t!==r.length-1&&(n+=i.betweenText,e+=i.betweenText);this.print(e)},a=(e(),this.readCustom({onKey:t=>t,onBackspace:t=>t,onArrow:t=>{o;if("up"===t||"left"===t)--o<0&&(o=r.length-1);else{if("down"!==t&&"right"!==t)return;++o>r.length-1&&(o=0)}e()},...i}));return a.rawPromise=a.promise,a.promise=new Promise(async t=>{await a.rawPromise,t(o)}),i.expectPromise?a.promise:a}parseCSS(t){return Printer.parseCSS(t,this.options.alwaysRGB,this.options.paletteName)}cleanCSS(t){return Printer.cleanCSS(t,this.options.alwaysRGB,this.options.paletteName)}applyCSS(t){return Printer.applyCSS(t,this.options.alwaysRGB,this.options.paletteName)}css(t,e=!0){return Printer.css(t,this.options.alwaysRGB,this.options.paletteName,e)}setOptions(t){return t=Printer.setDefault(t,null),this.options={...this.options,...t},this}updateBodyStyle=(t=document.body)=>{if(isWeb)return t.style.background="#1e1f22",t.style.color="#bcbec4",t.style.fontFamily="monospace,serif",this;throw new Error("updateBodyStyle() method cannot be used outside web.")};title(t=""){return isWeb?isReactNative||(document.title=t):this.stdout&&this.stdout.write(`]0;${t}`),this}static DEFAULT_OPTIONS=DEFAULT_OPTIONS;static DEFAULT_COLOR_PALETTES=COLOR_PALETTES;static DEFAULT_WEB_PALETTES=WEB_PALETTES;static paint=(t,e)=>(0<(e=Printer.setDefault(e,{color:"",backgroundColor:"",bold:!1,italic:!1,underline:!1,strikethrough:!1,padding:0,ending:!0,alwaysRGB:!1,paletteName:"default"})).padding&&(t=" ".repeat(e.padding)+t+" ".repeat(e.padding)),t=Printer.color(t,e.color,e.alwaysRGB,e.paletteName),t=Printer.background(t,e.backgroundColor,e.alwaysRGB,e.paletteName),e.bold&&(t=Color.bold(t)),e.italic&&(t=Color.italic(t)),e.underline&&(t=Color.underline(t)),e.strikethrough&&(t=Color.strikethrough(t)),t=e.ending?t:t.replace("[39m","").replace("[49m","").replace("[22m","").replace("[23m","").replace("[24m","").replace("[29m","").replace(" ",""));static stringify(t){var e=typeof t;return null===t?"null":"string"==e?t:"undefined"==e?"undefined":"boolean"==e?t?"true":"false":"object"==e||"symbol"==e||"function"==e?_util.inspect(t):t.toString()}static color(t,e,r=!1,i="default"){var o,n;return!e||["default","bgDefault","none","bgNone","transparent","bgTransparent"].includes(e)?t:(n={scarlet:"redBright",crimson:"redBright",vermilion:"redBright",lime:"greenBright",lemon:"yellowBright",canary:"yellowBright",electric:"blueBright",pink:"magentaBright",aqua:"cyanBright"}[n=(o="b"===e[0]&&"g"===e[1])?(e[2]||"").toLowerCase()+e.substring(3):e]||n,r&&ansiKeys.includes(e)?o?Printer.background(t,`rgb(${COLOR_PALETTES[i][n].join(",")})`,!0):Printer.color(t,`rgb(${COLOR_PALETTES[i][n].join(",")})`,!0):(r=Color.supportsColor.has16m,i=n.substring(4,n.length-1).split(/[, ]/).filter(t=>t.length).map(t=>+t),n.startsWith("rgb(")?r?Color[o?"bgRgb":"rgb"](...i)(t):t:n.startsWith("hsl(")?r?Color[o?"bgHsl":"hsl"](...i)(t):t:n.startsWith("hsv(")?r?Color[o?"bgHsv":"hsv"](...i)(t):t:"#"===n[0]?r?Color[o?"bgHex":"hex"](n.substring(1))(t):t:(!ansiKeys.includes(e)||Color.supportsColor.hasBasic)&&(ansiKeys.includes(e)||Color.supportsColor.has16m)&&"function"==typeof Color[e]?Color[e](t):t))}static background=(t,e,r=!1,i="default")=>Printer.color(t,"bg"+(e[0]||"").toUpperCase()+(e||"").substring(1),r,i);static setDefault=(e,r)=>(null!==e&&"object"==typeof e&&!Array.isArray(e)||(e={}),r&&Object.keys(r).forEach(t=>{void 0===e[t]?e[t]=r[t]:"object"==typeof r[t]&&null!==r[t]&&(e[t]=Printer.setDefault(e[t],r[t]))}),e);static makeGlobal(t=!1){t&&(global.console=Printer.static),global.Printer=Printer,global.printer=Printer.static}static new=t=>new Printer(t);static create=t=>new Printer(t);static substitute(i,o,...n){let a="",s=!1;var l={},u={value:""};for(let r=0;r<n.length;r++){var c=n[r];if("string"!=typeof c)a+=Printer.stringify(c)+(r===n.length-1?"":" ");else if(0===c.length)0!==r&&n[r-1].length&&(a=a.substring(0,a.length-1));else{let e=!1;for(let t=0;t<c.length;t++){var d,h=c[t];e?(e=!1,h===o?a+=o:(d=i[h])?(d=d(n[++r],{Cancel:l,Color:u}))===l?(a+=o+h,r--):d===u?(s=!0,a+=d.value):a+=d:a+=o+h):h===o&&r!==n.length-1?e=!0:a+=h}r!==n.length-1&&(a+=" ")}}return s&&(a+=ClearAll),a}static substituteStyles(t,r,e){return e.replaceAll(new RegExp("(\\"+t+")[\\da-zA-Z]","g"),t=>{var e=t[1],e=r[e];return e?e():t})}static parseCSS(t,e=0,r){const i={};return t.split(";").forEach(t=>i[t.split(":")[0].trim()]=t.split(":").slice(1).join(":").trim()),i}static cleanCSS(t,e=0,r){t=Printer.setDefault(t,null);var i={font:{color:"",style:{italic:!1},weight:100},background:{color:""},textDecoration:{line:{under:!1,through:!1}},padding:0},o=(i.font.color=t.color||t["font-color"]||t.fontColor||"",i.background.color=t.background||t["background-color"]||t.backgroundColor||"",i.font.weight=t["font-weight"]||t.fontWeight,"bold"===i.font.weight||"bolder"===i.font.weight?i.font.weight=600:"number"!=typeof i.font.weight&&(i.font.weight=100),t["font-style"]||t.fontStyle||""),o=(i.font.style.italic=o.includes("italic")||o.includes("oblique"),t["text-decoration"]||t.textDecoration||"");return i.textDecoration.line.under=o.includes("underline")||o.includes("under"),i.textDecoration.line.through=o.includes("strikethrough")||o.includes("strike-through")||o.includes("linethrough")||o.includes("line-through"),i.padding=t.padding,("number"!=typeof i.padding||i.padding<0)&&(i.padding=0),i}static applyCSS(t,e=!1,r="default"){return Printer.paint(" ",{color:t.font.color,backgroundColor:t.background.color,bold:600<=t.font.weight,italic:t.font.style.italic,underline:t.textDecoration.line.under,strikethrough:t.textDecoration.line.through,padding:t.padding,ending:!1,alwaysRGB:e,paletteName:r})}static css=(t,e=!1,r="default",i=!0)=>(i?ClearAll:"")+Printer.applyCSS(Printer.cleanCSS(Printer.parseCSS(t,e,r),e,r),e,r);static DEFAULT_OUTPUTS={web:o=>({write:t=>{var e=[],r=(t=webParser(t,e,[null,null],o.options.paletteName),[]);let i=[];for(let t=0;t<e.length;t++)""===e[t][0]?i=[]:i.push(e[t][0]),r.push(i.join(";"));console.log(t,...r)}}),html:n=>{if(isReactNative)return Printer.DEFAULT_OUTPUTS.web();if(!isWeb)return Printer.DEFAULT_OUTPUTS.terminal();const a=document.createElement("div");return{write:t=>{var e=[];t=webParser(t,e,[null,null],n.options.paletteName);let r=[],i=(a.innerText=t,a.innerHTML.replaceAll(" ","&nbsp;")),o=0;for(let t=0;t<e.length;t++)""===e[t][0]?r=[]:r.push(e[t][0]),e[t][0]?(i=i.replace("%c",`<span style="${r.join(";")}">`),o++):0<o?(i=i.replace("%c","</span>"),o--):i=i.replace("%c","");i+="</span>".repeat(o);t=n.options.htmlOut||document.body;"function"==typeof t?t(i):t.innerHTML+=i}}},terminal:()=>process.stdout,reactNative:()=>null};static makeWebPalette(t){return makeWebPalette(t)}static colorTag(t){return Printer.css("color: "+brackets.getTag(t.tag||"log").color)}static backgroundColorTag(t){return Printer.css("background-color: "+brackets.getTag(t.tag||"log").backgroundColor)}}const preset_inline=Printer.prototype.inline=Printer.inline=new Printer({newLine:!1}),preset_raw=Printer.prototype.raw=Printer.raw=new Printer({format:"%text"}),preset_normal=Printer.prototype.static=Printer.static=Printer.prototype.default=Printer.default=new Printer,preset_brackets=Printer.prototype.brackets=Printer.brackets=new Printer({tagBold:!0,tagPadding:0,tagColor:"default",dateBackgroundColor:"",timeBackgroundColor:"",datePadding:0,timePadding:0,namespaceColor:"",namespaceBackgroundColor:"",format:t=>Printer.colorTag(t)+(t.namespace?"[%namespace\b \b] | ":"")+"[%date] | [%time] [%tag] > %text"+ClearAll}),preset_html=(preset_brackets.tags={pass:{text:"PASS",textColor:"green",color:"green"},fail:{text:"FAIL",textColor:"redBright",color:"redBright"},error:{text:"ERR!",textColor:"red",color:"red"},warn:{text:"WARN",textColor:"yellow",color:"yellow"},info:{text:"INFO",textColor:"blue",color:"blue"},debug:{text:"DEBUG",textColor:"gray",color:"gray"},notice:{text:"NOTICE",textColor:"cyan",color:"cyan"},log:{text:"LOG",textColor:"white",color:"white"},assert:{text:"ASSERT",color:"gray",textColor:"gray"},ready:{text:"READY",color:"magenta",textColor:"magenta"}},Printer.prototype.html=Printer.html=new Printer),list=(Printer.html.stdout=Printer.DEFAULT_OUTPUTS.html(Printer.html),["inline","raw","static","default","brackets","html"]);list.forEach(e=>list.forEach(t=>Printer.prototype[e][t]=Printer.prototype[t])),Printer.__stack=__stack;export default Printer;export{Printer,preset_inline as inline,preset_raw as raw,preset_normal as normal,preset_brackets as brackets,preset_html as html};